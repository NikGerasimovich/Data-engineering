# CAP

**CAP-теорема** (Consistency, Availability, Partition Tolerance) описывает ограничения, с которыми сталкиваются распределённые системы. Она утверждает, что распределённая система может обеспечить одновременно только две из трёх следующих свойств:

- **Consistency (Согласованность)** – Все узлы системы видят одинаковые данные в любой момент времени. Если запрос выполнен, то все клиенты получают обновлённое состояние.
- **Availability (Доступность)** – Каждый запрос получает ответ (не обязательно правильный), даже если некоторые узлы вышли из строя.
- **Partition Tolerance (Устойчивость к разделению)** – Система продолжает работать, даже если сеть разделилась, и узлы не могут обмениваться данными друг с другом.

Грани CAP можно описать следующим образом:

- **PA** – В случае сетевого разделения узлов система продолжает отвечать пользователям на запросы, но при этом не гарантирует консистентности данных.
- **PC** – В случае сетевого разделения узлов система прекращает отвечать пользователям на запросы, но гарантирует консистентность данных.
- **AC** – В случае, когда сетевое соединение доступно, данные одновременно доступны и консистентны.

---

# PACELC

**PACELC-теорема** является расширением CAP-теоремы для более точного анализа компромиссов в распределённых системах. Она добавляет аспект, рассматривающий поведение системы, когда разделение сети отсутствует. 

Эту теорему можно представить в виде логического выражения:  
`if (P, then A or C, else L or C)`,  
где:  
- **P** – Partitioning (разделение сети),  
- **A** – Availability (доступность),  
- **C** – Consistency (согласованность),  
- **L** – Latency (задержка).  

---

### Описание PACELC:

#### **PA/EL**
- Используется в системах, где важна высокая доступность (A) при разделении (P) системы, или высокая скорость ответа (L) в отсутствие разделения (E).
- Такие системы приоритетны для внутренних процессов internet-based компаний, где важна производительность.
- Примеры: **Cassandra**, **Voldemort**, **DynamoDB**.

#### **PC/EC**
- Системы, следуя парадигме ACID, жертвуют доступностью (A) ради консистентности (C) при разделении (P), и скоростью (L) в отсутствии разделений (E).
- Поддерживают строгую согласованность, применяя синхронные коммиты.
- Примеры: **VoltDB/H-Store**, **Megastore**.

#### **PC/EL**
- Архитектура, стремящаяся к консистентности при разделении и к скорости ответа в отсутствии сетевых разделений, отводя согласованность на второй план.
- Пример: **PNUTS** – база данных от Yahoo!, обеспечивающая «Timeline Consistency» в распределённых средах.

#### **PA/EC**
- При наличии сетевого разделения ставка делается на доступность (A), а при отсутствии разделения – на консистентность (C).
- Пример: **Hazelcast**, сконфигурированный с гибридной синхронностью, обеспечивающей (A) при разделении и строгую (C) в отсутствии разделений.

